# 系统IO学习 

## C10K的实验

根据老师视频中实验方式  

##### 遇到问题是windows中默认没有开启路由转发，所以会出现客户端发出三次握手信息给服务端口9090收不到消息  解决办法：开启windows路由转发

开启之后服务端能够收到三次握手信息了，但是还是无法建立连接，是因为默认网关是虚拟机***.2不是本地虚拟机ip   XXX.1，所以按照老师的方式route add -host 192.168.0.112 gw 192.168.199.1 增加路由之后就可以正常建立连接了   

##### 另一种方式是我把默认的网关由XXX.2缓存XXX.1之后，也能正常建立连接了，但是无法访问外网了，而默认网关是XXX.2的话就可以正常访问外网，为什么会是这样？

```
NAT模式，.2的地址就是一个windows服务，发来的数据包要做源地址转换，替换成宿主机的IP，那么和开始的请求IP对应不上
数据包交给下一跳是谁，结果不一样，如果给.1就是收到数据包走windows的路由接受处理，如果是.2就交给服务，先做转换IP，再走windows路由处理
```

